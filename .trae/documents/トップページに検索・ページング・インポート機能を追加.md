## 方針（SQLiteなし／word.txt基盤）
- データベースは導入せず、`./.doc/word.txt`（または `./doc/word.txt`）を唯一のソースとして管理
- インポートは「word.txt を読み込んでメモリキャッシュに構築」→検索はこのキャッシュを使用
- 重複は読み込み時に除外（ファイル自体は書き換えない）

## 検索仕様（ユーザー要望反映）
- マッチ方法: 「単語頭からフィット」（前方一致）
  - 実装: `term.toLowerCase().startsWith(q.toLowerCase())`
  - 完全一致を最上位に、その後前方一致を昇順で返却
- リアルタイム: 入力に `200ms` デバウンスで都度検索

## バックエンド
1. 単語キャッシュモジュール
- 追加: `src/lib/wordStore.ts`
- 機能:
  - `loadFromFile(path)`：行読み込み→正規化→重複除外→メモリ保持
  - `getAll()`：全単語配列
  - `searchPrefix(q, page, pageSize)`：前方一致 + ページング
  - 実行中フラグで同時インポート抑止

2. インポートAPI（進捗SSE）
- ルート: `src/app/api/import/route.ts`（GET）
- 動作:
  - `.doc/word.txt` を読み込み、合計行数/現在行数 を計測
  - `text/event-stream` で `{ current, total, inserted, skipped, done }` を送信
  - 完了後、検索キャッシュが利用可能

3. 検索API
- ルート: `src/app/api/search/route.ts`
- パラメータ: `q`, `page`（1始まり）, `pageSize=10`
- 実装: `wordStore.searchPrefix` を使用
- 応答: `{ results, totalCount, totalPages, page }`
- キャッシュ未構築時: 0件（インポート案内）

## フロントエンド
1. 検索バー（前方一致のリアルタイム検索）
- 位置: ヘッダー直下中央
- 追加: `src/app/SearchClient.tsx`（クライアント）
- `GET /api/search` を呼び出し、結果を一覧表示

2. ページネーションUI
- コントロール: `« 前へ`・`1,2,3,...`・`次へ »`
- 現在ページを視覚強調（太字 + 背景ハイライト）

3. インポート起動 + 進捗バー
- トップに「単語インポート」ボタン
- `EventSource('/api/import')` を開始し、進捗に合わせてバー更新
- 完了で検索キャッシュが即反映

4. スタイル
- `page.module.css` に検索バー/結果/ページネーション/プログレスのクラスを追加（既存UIと調和）

## 既存機能との整合
- 詳細ページは静的配列外の語を 404 にするため、検索結果は当面リンクなし
- 拡張案（任意語の詳細表示）: APIとページの `notFound()` を撤去して、パラメータ語をそのままAIへ渡す

## 実装ステップ
1. `wordStore.ts` 作成
2. インポートSSE API実装
3. 前方一致の検索API実装
4. `SearchClient.tsx` 追加と `page.tsx` への組み込み
5. 進捗バーUIとインポートボタン追加
6. CSS調整
7. 動作確認

## 検証
- インポート前→0件
- インポート中→進捗バー更新
- インポート後→前方一致で 10件超の語に対してページング確認